# mac-cleaner

Швидкий та безпечний CLI-інструмент для звільнення дискового простору в macOS.

[English](../README.md) | [Polski](README_PL.md) | [Deutsch](README_DE.md) | Українська | [Русский](README_RU.md) | [Français](README_FR.md)

## Можливості

### Системні кеші
- **Кеш додатків** — `~/Library/Caches/` (безпечно)
- **Логи користувача** — `~/Library/Logs/` (безпечно)
- **Мініатюри QuickLook** — кеш QuickLook користувача (безпечно)

### Дані браузерів
- **Кеш Safari** — `~/Library/Caches/com.apple.Safari/` (помірний ризик)
- **Кеш Chrome** — `~/Library/Caches/Google/Chrome/` для всіх профілів (помірний ризик)
- **Кеш Firefox** — `~/Library/Caches/Firefox/` (помірний ризик)

### Кеші розробника
- **Xcode DerivedData** — `~/Library/Developer/Xcode/DerivedData/` (ризиковано)
- **Кеш npm** — `~/.npm/` (помірний ризик)
- **Кеш Yarn** — `~/Library/Caches/yarn/` (помірний ризик)
- **Кеш Homebrew** — `~/Library/Caches/Homebrew/` (помірний ризик)
- **Docker — ресурси для відновлення** — контейнери, образи, кеш збірки, томи (ризиковано)

### Залишки додатків
- **Осиротілі налаштування** — файли `.plist` у `~/Library/Preferences/` для видалених додатків (ризиковано)
- **Резервні копії пристроїв iOS** — `~/Library/Application Support/MobileSync/Backup/` (ризиковано)
- **Старі завантаження** — файли у `~/Downloads/` старші за 90 днів (помірний ризик)

## Безпека

mac-cleaner створений для захисту вашої системи:

- **SIP-захищені шляхи заблоковані** — `/System`, `/usr`, `/bin`, `/sbin` ніколи не зачіпаються (`/usr/local` дозволено)
- **Захист swap/VM** — `/private/var/vm` завжди заблокований для запобігання паніки ядра
- **Розв'язання символічних посилань** — усі шляхи розв'язуються перед видаленням
- **Три рівні ризику** — кожна категорія класифікується як **безпечна**, **помірна** або **ризикована**
- **Повторна валідація перед видаленням** — перевірки безпеки виконуються знову під час видалення, а не лише під час сканування
- **Режим попереднього перегляду** — перегляд усього перед виконанням з `--dry-run`
- **Інтерактивне підтвердження** — потрібна явна згода користувача перед видаленням (якщо не використовується `--force`)

## Встановлення

### Передумови

- **Go 1.25+**
- **macOS**

### Збірка з вихідного коду

```bash
git clone https://github.com/sp3esu/mac-cleaner.git
cd mac-cleaner
go build -o mac-cleaner .
./mac-cleaner --help
```

## Використання

**Інтерактивний режим** (за замовчуванням — проводить через кожну категорію):
```bash
./mac-cleaner
```

**Сканувати все, лише попередній перегляд:**
```bash
./mac-cleaner --all --dry-run
```

**Очистити системні кеші без підтвердження:**
```bash
./mac-cleaner --system-caches --force
```

**Сканувати все, вивід у JSON:**
```bash
./mac-cleaner --all --json
```

**Сканувати все, але пропустити Docker та резервні копії iOS:**
```bash
./mac-cleaner --all --skip-docker --skip-ios-backups
```

## Прапорці CLI

### Категорії сканування

| Прапорець | Опис |
|-----------|------|
| `--all` | Сканувати всі категорії |
| `--system-caches` | Сканувати кеш додатків, логи та мініатюри QuickLook |
| `--browser-data` | Сканувати кеші Safari, Chrome та Firefox |
| `--dev-caches` | Сканувати кеші Xcode, npm/yarn, Homebrew та Docker |
| `--app-leftovers` | Сканувати осиротілі налаштування, резервні копії iOS та старі завантаження |

### Вивід та поведінка

| Прапорець | Опис |
|-----------|------|
| `--dry-run` | Попередній перегляд без видалення |
| `--json` | Вивід результатів у форматі JSON |
| `--verbose` | Детальний список файлів |
| `--force` | Пропустити запит на підтвердження |

### Прапорці пропуску категорій

| Прапорець | Опис |
|-----------|------|
| `--skip-system-caches` | Пропустити сканування системних кешів |
| `--skip-browser-data` | Пропустити сканування даних браузерів |
| `--skip-dev-caches` | Пропустити сканування кешів розробника |
| `--skip-app-leftovers` | Пропустити сканування залишків додатків |

### Прапорці пропуску елементів

| Прапорець | Опис |
|-----------|------|
| `--skip-derived-data` | Пропустити Xcode DerivedData |
| `--skip-npm` | Пропустити кеш npm |
| `--skip-yarn` | Пропустити кеш Yarn |
| `--skip-homebrew` | Пропустити кеш Homebrew |
| `--skip-docker` | Пропустити ресурси Docker для відновлення |
| `--skip-safari` | Пропустити кеш Safari |
| `--skip-chrome` | Пропустити кеш Chrome |
| `--skip-firefox` | Пропустити кеш Firefox |
| `--skip-quicklook` | Пропустити мініатюри QuickLook |
| `--skip-orphaned-prefs` | Пропустити осиротілі налаштування |
| `--skip-ios-backups` | Пропустити резервні копії пристроїв iOS |
| `--skip-old-downloads` | Пропустити старі завантаження |

## Ліцензія

Проєкт наразі не містить файлу ліцензії.
